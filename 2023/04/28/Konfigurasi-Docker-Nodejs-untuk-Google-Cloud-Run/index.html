

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon.png">
  <link rel="icon" href="/images/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Rey">
  <meta name="keywords" content="">
  
    <meta name="description" content="Cloud Run merupakan layanan komputasi serverless berbasis container yang disediakan oleh Google. Ada dua kunci utama dari cloud run yaitu serverless dan container. Serverless berarti kita sebagai peng">
<meta property="og:type" content="article">
<meta property="og:title" content="Konfigurasi Docker Nodejs untuk Google Cloud Run">
<meta property="og:url" content="https://reyzeal.com/2023/04/28/Konfigurasi-Docker-Nodejs-untuk-Google-Cloud-Run/index.html">
<meta property="og:site_name" content="Reyzeal">
<meta property="og:description" content="Cloud Run merupakan layanan komputasi serverless berbasis container yang disediakan oleh Google. Ada dua kunci utama dari cloud run yaitu serverless dan container. Serverless berarti kita sebagai peng">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/d06a4427-image.png">
<meta property="og:image" content="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/b4f65616-image.png">
<meta property="og:image" content="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/a9acdc32-image.png">
<meta property="article:published_time" content="2023-04-28T16:00:00.000Z">
<meta property="article:modified_time" content="2023-05-06T07:16:33.879Z">
<meta property="article:author" content="Rey">
<meta property="article:tag" content="cloud">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="dockerfile">
<meta property="article:tag" content="webservice">
<meta property="article:tag" content="nodejs">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/d06a4427-image.png">
  
  
  
  <title>Reyzeal | Konfigurasi Docker Nodejs untuk Google Cloud Run - Reyzeal</title>
  <meta name="title" content="Konfigurasi Docker Nodejs untuk Google Cloud Run - Reyzeal">

  <meta property="og:type" content="website">
  <meta property="og:url" content="https://reyzeal.com/">
  <meta property="og:title" content="Konfigurasi Docker Nodejs untuk Google Cloud Run - Reyzeal">
  <meta property="og:description" content="Cloud Run merupakan layanan komputasi serverless berbasis container yang disediakan oleh Google. Ada dua kunci utama dari cloud run yaitu serverless dan container. Serverless berarti kita sebagai peng">
  <meta property="og:image" content="/images/IMG_20190104_131336.jpg">

  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://reyzeal.com/">
  <meta property="twitter:title" content="Konfigurasi Docker Nodejs untuk Google Cloud Run - Reyzeal">
  <meta property="twitter:description" content="Cloud Run merupakan layanan komputasi serverless berbasis container yang disediakan oleh Google. Ada dua kunci utama dari cloud run yaitu serverless dan container. Serverless berarti kita sebagai peng">
  <meta property="twitter:image" content="/images/IMG_20190104_131336.jpg">

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"reyzeal.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7620612957607349"
          crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ELWFJK9L60"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-ELWFJK9L60');
  </script>
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Reyzeal</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Konfigurasi Docker Nodejs untuk Google Cloud Run"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-04-28 23:00" pubdate>
          April 28, 2023 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          3.5k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          29 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Konfigurasi Docker Nodejs untuk Google Cloud Run</h1>
            
            
              <div class="markdown-body">
                
                <p>Cloud Run merupakan layanan komputasi serverless berbasis container yang disediakan oleh Google. Ada dua kunci utama dari cloud run yaitu serverless dan container. Serverless berarti kita sebagai pengguna tidak perlu melakukan penyediaan, konfigurasi, dan pengelolaan server. Karena berbasis container, maka kita hanya perlu mengatur environment container tersebut dengan dockerfile. Lalu bagaimana kita melakukan konfigurasi dockerfile nodejs?</p>





<span id="more"></span>





<p>Oiya, sebenarnya untuk dockerfile ini bisa berlaku universal di platform manapun. Namun dalam kasus ini saya menggunakan studi kasus di Google Cloud Run. Sehingga untuk beberapa teknis saya sesuaikan dengan dokumentasi dan arahan dari Google Cloud Platform.</p>





<p>Sebelum kita mulai membahas dockerfilenya, kita coba bagi menjadi dua section. Pertama, kita coba gunakan dockerfile yang ada dari dokumentasi original dari Node. Kemudian melakukan adjustment agar sesuai dengan environment GCP.</p>





<h3>Server.js</h3>





<p>Dengan asumsi kita memiliki entrypoint di script bernama server.js:</p>





<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">const express = require(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br>// Konstanta<br>const PORT = <span class="hljs-number">8080</span>;<br>const HOST = <span class="hljs-string">&#x27;0.0.0.0&#x27;</span>;<br><br>// Webservice<br>const app = express();<br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, (req, res) =&gt; &#123;<br>  res.send(<span class="hljs-string">&#x27;Hello World&#x27;</span>);<br>&#125;);<br><br>app.listen(PORT, HOST);<br>console.log(`Running on http://$&#123;HOST&#125;:$&#123;PORT&#125;`);<br></code></pre></td></tr></table></figure>





<h2>Dockerfile Nodejs</h2>





<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> node:<span class="hljs-number">16</span><br><br><span class="hljs-comment"># Path yang dijadikan direktori utama app ini</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /usr/src/app</span><br><br><span class="hljs-comment"># Menyalin package.json dan package-lock.json</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> package*.json ./</span><br><br><span class="hljs-keyword">RUN</span><span class="language-bash"> npm install</span><br><span class="hljs-comment"># Melakukan instalasi library yang dibutuhkan</span><br><span class="hljs-comment"># gunakan line bawah ini untuk versi production</span><br><span class="hljs-comment"># RUN npm ci --only=production</span><br><br><span class="hljs-comment"># menyalin script app</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> . .</span><br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> &amp;<span class="hljs-comment">#91; &quot;node&quot;, &quot;server.js&quot; ]</span></span><br></code></pre></td></tr></table></figure>





<h2>Penyesuaian dengan Environment GCR/GCP</h2>





<p>Ada dua hal yang perlu diperhatikan dalam melakukan deployment dockerfile di GCR. Pertama, environment variables yang perlu kita cermati karena ada beberapa nama yang sudah digunakan oleh GCP. Kedua, masalah networking terutama port.</p>





<figure class="wp-block-image size-full">
<img src="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/d06a4427-image.png" srcset="/img/loading.gif" lazyload alt="" class="wp-image-146"/>
</figure>





<p>Sebaiknya konstanta yang berkaitan dengan port menggunakan environment variable dari GCR dan memberi default value agar tidak bernilai salah ketika environment variablenya tidak diisi. Seperti ini misalnya:</p>





<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">// server.js<br><br>const express = require(<span class="hljs-string">&#x27;express&#x27;</span>);<br><br>// Konstanta<br>const PORT = process.<span class="hljs-keyword">env</span>.PORT || <span class="hljs-number">8080</span>;<br>const HOST = <span class="hljs-string">&#x27;0.0.0.0&#x27;</span>;<br><br>// Webservice<br>const app = express();<br>app.get(<span class="hljs-string">&#x27;/&#x27;</span>, (req, res) =&gt; &#123;<br>  res.send(<span class="hljs-string">&#x27;Hello World&#x27;</span>);<br>&#125;);<br><br>app.listen(PORT, HOST);<br>console.log(`Running on http://$&#123;HOST&#125;:$&#123;PORT&#125;`);<br></code></pre></td></tr></table></figure>





<p>Deploy ke GCR bisa dilakukan secara interactive dengan gcloud cli:</p>





<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">gcloud <span class="hljs-keyword">run</span><span class="language-bash"> deploy</span><br></code></pre></td></tr></table></figure>





<p>Kita bisa menggunakan Google Cloud Build sehingga hasil imagenya dapat disimpan dan digunakan untuk deploy instance GCR.</p>





<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># untuk build</span><br>gcloud builds submit --tag asia.gcr.io/PROJECT-ID/IMAGE-NAME:VERSION<br><br><span class="hljs-comment"># untuk deploy ke GCR</span><br>gcloud <span class="hljs-keyword">run</span><span class="language-bash"> deploy --image asia.gcr.io/PROJECT-ID/IMAGE-NAME:VERSION --allow-unauthenticated --region asia-southeast1 NAMA_INSTANCE_GCR</span><br></code></pre></td></tr></table></figure>





<h3>Tips</h3>





<p>Pilih node image yang lebih kecil jika merasa hasil imagenya terlalu besar. Misalnya untuk image <code>node:16</code> menghasilkan 3048 MB.</p>





<figure class="wp-block-image size-full"><img src="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/b4f65616-image.png" srcset="/img/loading.gif" lazyload alt="" class="wp-image-147"/></figure>





<p>Sedangkan untuk <code>node:16-alpine</code> menghasilkan 1992 MB.</p>





<figure class="wp-block-image size-full"><img src="https://storage.googleapis.com/stateless-reyzeal-com/2022/04/a9acdc32-image.png" srcset="/img/loading.gif" lazyload alt="" class="wp-image-148"/></figure>





<p>Demikian untuk konfigurasi dasar untuk dockerfile nodejs. Semoga lain kesempatan akan kita bisa membahas tentang multistage dockerfile untuk nodejs maupun typescript. Saya juga menulis tentang konfigurasi docker untuk bahasa lain seperti <a href="https://reyzeal.com/2022/04/26/Konfigurasi-Docker-PHP-untuk-Google-Cloud-Run/" target="_blank" rel="noreferrer noopener">php</a> dan tutorial untuk melakukan <a href="https://reyzeal.com/2022/04/instalasi-font-di-docker/" target="_blank" rel="noreferrer noopener">instalasi font di docker</a>.</p>





<h3>Daftar Links</h3>





<p>"Dockerizing a Node.js Web App" - <a href="https://nodejs.org/en/docs/guides/nodejs-docker-webapp/" target="_blank" rel="noreferrer noopener">https://nodejs.org/en/docs/guides/nodejs-docker-webapp/</a></p>





<p>"Quickstart: Deploy a Node.js service to Cloud Run" - <a href="https://cloud.google.com/run/docs/quickstarts/build-and-deploy/deploy-nodejs-service" target="_blank" rel="noreferrer noopener">https://cloud.google.com/run/docs/quickstarts/build-and-deploy/deploy-nodejs-service</a></p>





<p>"Container run contract" - <a href="https://cloud.google.com/run/docs/container-contract" target="_blank" rel="noreferrer noopener">https://cloud.google.com/run/docs/container-contract</a></p>



                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/cloud/">#cloud</a>
      
        <a href="/tags/docker/">#docker</a>
      
        <a href="/tags/dockerfile/">#dockerfile</a>
      
        <a href="/tags/webservice/">#webservice</a>
      
        <a href="/tags/nodejs/">#nodejs</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Konfigurasi Docker Nodejs untuk Google Cloud Run</div>
      <div>https://reyzeal.com/2023/04/28/Konfigurasi-Docker-Nodejs-untuk-Google-Cloud-Run/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Rey</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>April 28, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/05/03/Pengaturan-Puppeteer-di-VM-Compute-Engine-GCP/" title="Pengaturan Puppeteer di VM GCP">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Pengaturan Puppeteer di VM GCP</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/04/26/Konfigurasi-Docker-PHP-untuk-Google-Cloud-Run/" title="Konfigurasi Docker PHP untuk Google Cloud Run">
                        <span class="hidden-mobile">Konfigurasi Docker PHP untuk Google Cloud Run</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Reyzeal</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
