import{r as J,d as A,g as X,u as G,a as Q,e as k,f as pe,h as K,i as Y,j as ge,k as we,l as ye,c as L,n as ve,p as be,S as Z,q as Re,o as ee,t as q,w as Pe}from"./solid-BkqplXXh.js";function te(){let e=new Set;function t(n){return e.add(n),()=>e.delete(n)}let o=!1;function r(n,a){if(o)return!(o=!1);const s={to:n,options:a,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const l of e)l.listener({...s,from:l.location,retry:f=>{f&&(o=!0),l.navigate(n,{...a,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:r}}let $;function N(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),$=window.history.state._depth}N();function Ae(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Le(e,t){let o=!1;return()=>{const r=$;N();const n=r==null?null:$-r;if(o){o=!1;return}n&&t(n)?(o=!0,window.history.go(-n)):e()}}const Se=/^(?:[a-z0-9]+:)?\/\//i,Ee=/^\/+|(\/)\/+$/g,ne="http://sr";function I(e,t=!1){const o=e.replace(Ee,"$1");return o?t||/^[?#]/.test(o)?o:"/"+o:""}function B(e,t,o){if(Se.test(t))return;const r=I(e),n=o&&I(o);let a="";return!n||t.startsWith("/")?a=r:n.toLowerCase().indexOf(r.toLowerCase())!==0?a=r+n:a=n,(a||"/")+I(t,!a)}function xe(e,t){if(e==null)throw new Error(t);return e}function Ce(e,t){return I(e).replace(/\/*(\*.*)?$/g,"")+I(t)}function re(e){const t={};return e.searchParams.forEach((o,r)=>{r in t?Array.isArray(t[r])?t[r].push(o):t[r]=[t[r],o]:t[r]=o}),t}function Oe(e,t,o){const[r,n]=e.split("/*",2),a=r.split("/").filter(Boolean),s=a.length;return l=>{const f=l.split("/").filter(Boolean),i=f.length-s;if(i<0||i>0&&n===void 0&&!t)return null;const h={path:s?"":"/",params:{}},y=m=>o===void 0?void 0:o[m];for(let m=0;m<s;m++){const g=a[m],b=g[0]===":",c=b?f[m]:f[m].toLowerCase(),u=b?g.slice(1):g.toLowerCase();if(b&&D(c,y(u)))h.params[u]=c;else if(b||!D(c,u))return null;h.path+=`/${c}`}if(n){const m=i?f.slice(-i).join("/"):"";if(D(m,y(n)))h.params[n]=m;else return null}return h}}function D(e,t){const o=r=>r===e;return t===void 0?!0:typeof t=="string"?o(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(o):t instanceof RegExp?t.test(e):!1}function Fe(e){const[t,o]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((n,a)=>n+(a.startsWith(":")?2:3),r.length-(o===void 0?0:1))}function oe(e){const t=new Map,o=X();return new Proxy({},{get(r,n){return t.has(n)||J(o,()=>t.set(n,A(()=>e()[n]))),t.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ae(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let o=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const n=[o,o+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)n.push(o+=t[1]),r=r.slice(t[0].length);return ae(r).reduce((a,s)=>[...a,...n.map(l=>l+s)],[])}const Ue=100,se=Q(),ie=Q(),ke=()=>xe(G(se),"<A> and 'use' router primitives can be only used inside a Route."),Ge=()=>ke().navigatorFactory();function Ie(e,t=""){const{component:o,preload:r,load:n,children:a,info:s}=e,l=!a||Array.isArray(a)&&!a.length,f={key:e,component:o,preload:r||n,info:s};return ce(e.path).reduce((i,h)=>{for(const y of ae(h)){const m=Ce(t,y);let g=l?m:m.split("/*",1)[0];g=g.split("/").map(b=>b.startsWith(":")||b.startsWith("*")?b:encodeURIComponent(b)).join("/"),i.push({...f,originalPath:h,pattern:g,matcher:Oe(g,!l,e.matchFilters)})}return i},[])}function je(e,t=0){return{routes:e,score:Fe(e[e.length-1])*1e4-t,matcher(o){const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n],s=a.matcher(o);if(!s)return null;r.unshift({...s,route:a})}return r}}}function ce(e){return Array.isArray(e)?e:[e]}function ue(e,t="",o=[],r=[]){const n=ce(e);for(let a=0,s=n.length;a<s;a++){const l=n[a];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const f=Ie(l,t);for(const i of f){o.push(i);const h=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!h)ue(l.children,i.pattern,o,r);else{const y=je([...o],r.length);r.push(y)}o.pop()}}}return o.length?r:r.sort((a,s)=>s.score-a.score)}function T(e,t){for(let o=0,r=e.length;o<r;o++){const n=e[o].matcher(t);if(n)return n}return[]}function Be(e,t,o){const r=new URL(ne),n=A(h=>{const y=e();try{return new URL(y,r)}catch{return console.error(`Invalid path ${y}`),h}},r,{equals:(h,y)=>h.href===y.href}),a=A(()=>n().pathname),s=A(()=>n().search,!0),l=A(()=>n().hash),f=()=>"",i=K(s,()=>re(n()));return{get pathname(){return a()},get search(){return s()},get hash(){return l()},get state(){return t()},get key(){return f()},query:o?o(i):oe(i)}}let x;function We(){return x}function _e(e,t,o,r={}){const{signal:[n,a],utils:s={}}=e,l=s.parsePath||(d=>d),f=s.renderPath||(d=>d),i=s.beforeLeave||te(),h=B("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!n().value&&a({value:h,replace:!0,scroll:!1});const[y,m]=k(!1);let g;const b=(d,p)=>{p.value===c()&&p.state===v()||(g===void 0&&m(!0),x=d,g=p,we(()=>{g===p&&(u(g.value),w(g.state),E[1](R=>R.filter(C=>C.pending)))}).finally(()=>{g===p&&ye(()=>{x=void 0,d==="navigate"&&de(g),m(!1),g=void 0})}))},[c,u]=k(n().value),[v,w]=k(n().state),S=Be(c,v,s.queryWrapper),P=[],E=k([]),F=A(()=>typeof r.transformUrl=="function"?T(t(),r.transformUrl(S.pathname)):T(t(),S.pathname)),M=()=>{const d=F(),p={};for(let R=0;R<d.length;R++)Object.assign(p,d[R].params);return p},le=s.paramsWrapper?s.paramsWrapper(M,t):oe(M),z={pattern:h,path:()=>h,outlet:()=>null,resolvePath(d){return B(h,d)}};return pe(K(n,d=>b("native",d),{defer:!0})),{base:z,location:S,params:le,isRouting:y,renderPath:f,parsePath:l,navigatorFactory:he,matches:F,beforeLeave:i,preloadRoute:me,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:E};function fe(d,p,R){Y(()=>{if(typeof p=="number"){p&&(s.go?s.go(p):console.warn("Router integration does not support relative routing"));return}const C=!p||p[0]==="?",{replace:W,resolve:O,scroll:_,state:U}={replace:!1,resolve:!C,scroll:!0,...R},j=O?d.resolvePath(p):B(C&&S.pathname||"",p);if(j===void 0)throw new Error(`Path '${p}' is not a routable path`);if(P.length>=Ue)throw new Error("Too many redirects");const V=c();(j!==V||U!==v())&&(ge||i.confirm(j,R)&&(P.push({value:V,replace:W,scroll:_,state:v()}),b("navigate",{value:j,state:U})))})}function he(d){return d=d||G(ie)||z,(p,R)=>fe(d,p,R)}function de(d){const p=P[0];p&&(a({...d,replace:p.replace,scroll:p.scroll}),P.length=0)}function me(d,p){const R=T(t(),d.pathname),C=x;x="preload";for(let W in R){const{route:O,params:_}=R[W];O.component&&O.component.preload&&O.component.preload();const{preload:U}=O;p&&U&&J(o(),()=>U({params:_,location:{pathname:d.pathname,search:d.search,hash:d.hash,query:re(d),state:null,key:""},intent:"preload"}))}x=C}}function qe(e,t,o,r){const{base:n,location:a,params:s}=e,{pattern:l,component:f,preload:i}=r().route,h=A(()=>r().path);f&&f.preload&&f.preload();const y=i?i({params:s,location:a,intent:x||"initial"}):void 0;return{parent:t,pattern:l,path:h,outlet:()=>f?L(f,{params:s,location:a,data:y,get children(){return o()}}):o(),resolvePath(g){return B(n.path(),g,h())}}}const De=e=>t=>{const{base:o}=t,r=ve(()=>t.children),n=A(()=>ue(r(),t.base||""));let a;const s=_e(e,n,()=>a,{base:o,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(s),L(se.Provider,{value:s,get children(){return L(Te,{routerState:s,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[be(()=>(a=X())&&null),L($e,{routerState:s,get branches(){return n()}})]}})}})};function Te(e){const t=e.routerState.location,o=e.routerState.params,r=A(()=>e.preload&&Y(()=>{e.preload({params:o,location:t,intent:We()||"initial"})}));return L(Z,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:n=>L(n,{params:o,location:t,get data(){return r()},get children(){return e.children}})})}function $e(e){const t=[];let o;const r=A(K(e.routerState.matches,(n,a,s)=>{let l=a&&n.length===a.length;const f=[];for(let i=0,h=n.length;i<h;i++){const y=a&&a[i],m=n[i];s&&y&&m.route.key===y.route.key?f[i]=s[i]:(l=!1,t[i]&&t[i](),Re(g=>{t[i]=g,f[i]=qe(e.routerState,f[i-1]||e.routerState.base,H(()=>r()[i+1]),()=>e.routerState.matches()[i])}))}return t.splice(n.length).forEach(i=>i()),s&&l?s:(o=f[0],f)}));return H(()=>r()&&o)()}const H=e=>()=>L(Z,{get when(){return e()},keyed:!0,children:t=>L(ie.Provider,{value:t,get children(){return t.outlet()}})});function Ke([e,t],o,r){return[e,r?n=>t(r(n)):t]}function Ne(e){let t=!1;const o=n=>typeof n=="string"?{value:n}:n,r=Ke(k(o(e.get()),{equals:(n,a)=>n.value===a.value&&n.state===a.state}),void 0,n=>(!t&&e.set(n),q.registry&&!q.done&&(q.done=!0),n));return e.init&&ee(e.init((n=e.get())=>{t=!0,r[1](o(n)),t=!1})),De({signal:r,create:e.create,utils:e.utils})}function Me(e,t,o){return e.addEventListener(t,o),()=>e.removeEventListener(t,o)}function ze(e,t){const o=e&&document.getElementById(e);o?o.scrollIntoView():t&&window.scrollTo(0,0)}const Ve=new Map;function He(e=!0,t=!1,o="/_server",r){return n=>{const a=n.base.path(),s=n.navigatorFactory(n.base);let l,f;function i(c){return c.namespaceURI==="http://www.w3.org/2000/svg"}function h(c){if(c.defaultPrevented||c.button!==0||c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)return;const u=c.composedPath().find(F=>F instanceof Node&&F.nodeName.toUpperCase()==="A");if(!u||t&&!u.hasAttribute("link"))return;const v=i(u),w=v?u.href.baseVal:u.href;if((v?u.target.baseVal:u.target)||!w&&!u.hasAttribute("state"))return;const P=(u.getAttribute("rel")||"").split(/\s+/);if(u.hasAttribute("download")||P&&P.includes("external"))return;const E=v?new URL(w,document.baseURI):new URL(w);if(!(E.origin!==window.location.origin||a&&E.pathname&&!E.pathname.toLowerCase().startsWith(a.toLowerCase())))return[u,E]}function y(c){const u=h(c);if(!u)return;const[v,w]=u,S=n.parsePath(w.pathname+w.search+w.hash),P=v.getAttribute("state");c.preventDefault(),s(S,{resolve:!1,replace:v.hasAttribute("replace"),scroll:!v.hasAttribute("noscroll"),state:P?JSON.parse(P):void 0})}function m(c){const u=h(c);if(!u)return;const[v,w]=u;r&&(w.pathname=r(w.pathname)),n.preloadRoute(w,v.getAttribute("preload")!=="false")}function g(c){clearTimeout(l);const u=h(c);if(!u)return f=null;const[v,w]=u;f!==v&&(r&&(w.pathname=r(w.pathname)),l=setTimeout(()=>{n.preloadRoute(w,v.getAttribute("preload")!=="false"),f=v},20))}function b(c){if(c.defaultPrevented)return;let u=c.submitter&&c.submitter.hasAttribute("formaction")?c.submitter.getAttribute("formaction"):c.target.getAttribute("action");if(!u)return;if(!u.startsWith("https://action/")){const w=new URL(u,ne);if(u=n.parsePath(w.pathname+w.search),!u.startsWith(o))return}if(c.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const v=Ve.get(u);if(v){c.preventDefault();const w=new FormData(c.target,c.submitter);v.call({r:n,f:c.target},c.target.enctype==="multipart/form-data"?w:new URLSearchParams(w))}}Pe(["click","submit"]),document.addEventListener("click",y),e&&(document.addEventListener("mousemove",g,{passive:!0}),document.addEventListener("focusin",m,{passive:!0}),document.addEventListener("touchstart",m,{passive:!0})),document.addEventListener("submit",b),ee(()=>{document.removeEventListener("click",y),e&&(document.removeEventListener("mousemove",g),document.removeEventListener("focusin",m),document.removeEventListener("touchstart",m)),document.removeEventListener("submit",b)})}}function Qe(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,n=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:n}},o=te();return Ne({get:t,set({value:r,replace:n,scroll:a,state:s}){n?window.history.replaceState(Ae(s),"",r):window.history.pushState(s,"",r),ze(decodeURIComponent(window.location.hash.slice(1)),a),N()},init:r=>Me(window,"popstate",Le(r,n=>{if(n&&n<0)return!o.confirm(n);{const a=t();return!o.confirm(a.value,{state:a.state})}})),create:He(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:o}})(e)}export{Qe as R,Ge as u};
